<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Catch Them Young</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="../css/dark-mode.css">
  <link rel="stylesheet" href="../css/migration-modal.css">
                   

                   <!-- font link -->

         <link rel="preconnect" href="https://fonts.googleapis.com">
         <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
         <link href="https://fonts.googleapis.com/css2?family=Comic+Relief:wght@400;700&display=swap" rel="stylesheet">

  <!-- PWA mets tags -->
        <link rel="manifest" href="../manifest.json">
        <meta name="theme-color" content="#4CAF50">
        <!-- ios support -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <meta name="apple-mobile-web-app-title" content="CTY Bible">
        <link rel="apple-touch-icon" href="../assets/icons/icon-192x192.png">
  
  <!-- Inline Styles for Daily Card -->
  <!-- <style>
   
  </style> -->
  
  <!-- Firebase v8 CDN (compat, no modules) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>
</head>
<body>
  <!-- Fixed Top Navbar -->
  <nav  class="dashboard-navbar">
    <div class="navbar-left">
      <div class="logo">
        <!-- <img src="../assets/images/official-logo.svg" alt=""> -->
         <!-- <div class="profile-avatar"> -->
                    <img id="profileAvatar" src="../assets/images/official-logo.svg" alt="#">
                    <!-- <input type="file" id="avatarUpload" accept="image/*" style="display: none;"> -->
                    <!-- <button type="button" id="avatarUploadBtn" class="avatar-upload-btn">Change Photo</button> -->
                <!-- </div> -->
      </div>
    </div>
    <div class="navbar-right">
      <a href="#" class="btn btn-secondary" aria-label="logout" onClick="logout()">‚Üê Logout</a>
        
                <!-- tooltip was implemented here -->
    <button id="installBtn" class="btn-install" style="display: none;">Install App
        <span class="tooltip">Install for a better personalized experience</span>
    </button>

      <!-- <button class="theme-toggle" aria-label="Toggle theme">üåì</button> -->
      <!-- we will implement 3d avatar later as a new feature to excite users-->
      <!-- <div class="user-avatar"> -->
        <!-- <img src="assets/images/avatar-placeholder.png" alt="User Avatar"> -->
      <!-- </div> -->
    </div>
  </nav>

  <!-- Main Dashboard Content -->
  <main class="dashboard-content">
    <!-- Welcome Section -->
    <section class="welcome-section">
      <div class="greeting">
        <h1 id="greeting-text">
          Good Morning! 
          <img src="../assets/icons/waving-hand-cty.svg" alt="waving-hand">
        </h1>
        <div class="streak-display">
          <span class="streak-icon">
            <img src="../assets/icons/fire-cty.svg" alt="fire" width="30">
          </span>
          <span class="streakCount" id="streak-count">Loading...</span>
        </div>
      </div>
    </section>

    <!-- Progress Bar -->
    <section class="progress-section">
      <div class="progress-header">
        <h2>Today's Goal</h2>
        <div class="progress-header-right">
          <span id="progress-face" class="progress-face" aria-label="mood">üò¢</span>
          <span class="progress-percentage">0%</span>
        </div>
      </div>
      <div class="progress-bar-container">
        <div class="progress-bar-fill"  id="progress-bar-fill"></div>
      </div>
    </section>

    <!-- Daily Card Section -->
    <section class="daily-section">
      <div class="daily-card" id="daily-card">
        <div class="daily-card-header">
          <h2>
            <img src="../assets/icons/blue-calendar-cty.svg" alt="calendar"> 
            Today's Content
          </h2>
          <span class="daily-date" id="verse-date">Loading...</span>
        </div>
        
        
        <!-- <div class="daily-card-content">
          <div class="daily-verse">
            <h3>üìñ Bible Verse</h3>
            <p id="verse-text">Loading verse...</p>
            <span class="verse-ref" id="verse-reference">Loading reference...</span>
          </div>
          <div class="daily-moral">
            <h3>üí° Moral Lesson</h3>
            <p id="moral-text">Loading moral...</p>
          </div>
          <div class="daily-challenge">
            <h3>üéØ Today's Challenge</h3>
            <p id="reflection-question">Loading challenge...</p>
          </div>
        </div>
        <div class="daily-card-actions">
          <a href="./todaysverse.html" class="btn btn-primary">Read Full Content ‚Üí</a>
        </div>
      </div-->
    </section>

    <!-- Main Cards Grid -->
    <section class="cards-grid" >
      <div class="dashboard-card verse-card">
        <div class="card-icon">
          <img src="../assets/icons/open-bible-cty.svg" alt="bible" width="70">
        </div>
        <h3>Today's Verse</h3>
        <p id="passage">"Loading..."</p>
        <a href="./todaysverse.html" class="card-action">Read More ‚Üí</a>
      </div>

      <div class="dashboard-card moral-card">
        <div class="card-icon">
          <img src="../assets/icons/very-bright-heart-cty.svg" alt="heart" width="70">
        </div>
        <h3>Moral of the Day</h3>
        <p id="moral">Loading...</p>
        <a href="./todaysverse.html" class="card-action">Learn More ‚Üí</a>
      </div>

      <div class="dashboard-card leaderboard-card">
        <div class="card-icon"> 
          <img src="../assets/icons/trophy-cty.svg" alt="trophy" width="70">
        </div>
        <h3>Leaderboard</h3>
        <p>You're in 3rd place this week!</p>
        <a href="./leaderboard.html" class="card-action">View Rankings ‚Üí</a>
      </div>

      <div class="dashboard-card profile-card">
        <div class="card-icon"> 
          <img src="../assets/icons/person-cty.svg" alt="person" width="70">
        </div>
        <h3>My Profile</h3>
        <p>Update your settings and progress</p>
        <a href="./profile.html" class="card-action" >Edit Profile ‚Üí</a>
      </div>

       <div class="dashboard-card games-card">
        <div class="card-icon"> 
          <img src="../assets/icons/game-pad-cty.svg" alt="game-pad" width="70">
        </div>
        <h3>Fun Games</h3>
        <p>Enjoy Fun Games</p>
        <a href="./games.html" class="card-action" >Play Game ‚Üí</a>
      </div>
    </section>
  </main>

  <!-- Floating Confetti/Sparkles -->
  <div class="sparkles">
    <span class="sparkle"> <img src="../assets/icons/six-sides-star-cty.svg" alt=""></span>
    <span class="sparkle"> <img src="../assets/icons/3d-rotate-star-cty.svg" alt=""></span>
    <span class="sparkle"> <img src="../assets/icons/another-3d-rotate-star-cty.svg" alt=""></span>
    <span class="sparkle"> <img src="../assets/icons/smaller-star-cty.svg" alt=""></span>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast hidden" role="alert" aria-live="polite"></div>

  <!-- Migration Modal Overlay -->
    <div id="migrationModal" class="modal-overlay">
        <div class="modal-container">
            <!-- Modal Header -->
            <div class="modal-header">
                <h2>Help Us Personalize Your Experience</h2>
                <p>We'd like to know your birth month and day to provide age-appropriate content.</p>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <form id="migrationForm">
                    <div class="form-group">
                        <label for="birthMonth">Birth Month</label>
                        <select id="birthMonth" name="birthMonth" required>
                            <option value="">Select Month</option>
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="birthDay">Birth Day</label>
                        <select id="birthDay" name="birthDay" required>
                            <option value="">Select Day</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30">30</option>
                            <option value="31">31</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="currentAge">Current Age</label>
                        <input type="number" id="currentAge" name="currentAge" min="4" max="17" readonly>
                        <small>This helps us provide age-appropriate content</small>
                    </div>
                </form>
            </div>

            <!-- Modal Footer -->
            <div class="modal-footer">
                <button type="button" id="skipButton" class="btn btn-secondary">
                    Skip for Now
                </button>
                <button type="button" id="saveButton" class="btn btn-primary">
                    Save & Continue
                </button>
            </div>

            <!-- Close Button -->
            <button type="button" id="closeButton" class="modal-close" aria-label="Close modal">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>



  <!-- Celebration Modal -->
  <div id="celebrationModal" class="celebration-overlay" hidden>
    <div class="celebration-card">
      <div class="celebration-confetti" id="celebrationConfetti"></div>
      <div class="celebration-emoji">üéâ</div>
      <h2 class="celebration-title">All Done!</h2>
      <p class="celebration-msg">You've completed all your tasks for today.<br>Amazing work, keep it up!</p>
      <button id="closeCelebration" class="btn btn-primary">Keep it up! üôå</button>
    </div>
  </div>

  <script src="../js/firebase-config.js"></script>
  <script src="../authentication/auth-v2.js"></script>
  <script src="./content-v2.js"></script>
  <script src="./dashboard.js"></script>
  <script src="./migration-modal.js"></script>
  <script src="../js/pwa-install.js"></script>
  
 <script src="./checkbox.js"></script> 
 <script src="../js/dark-mode.js"></script>
  
</body>
</html>